<div class="trading-page">
    <div class="container">
        <div class="page-header">
            <h2>Giao dịch Crypto</h2>
            <p>Mua và bán các loại tiền điện tử</p>
        </div>

        <div class="trading-panel">
            <div class="trading-chart-wrapper">
                <div id="externalChartAnchor" class="external-chart-anchor">
                    <!-- You can replace the inner content with an <img> or iframe later. -->
                    <a id="externalChartLink" class="external-chart-link" href="https://www.tradingview.com/symbols/BTCUSD/" target="_blank" rel="noopener noreferrer">
                        <img id="externalChartImage" class="external-chart-image" src="/img/chart-candle.webp" alt="Ảnh biểu đồ nến">
                    </a>
                </div>
                <div class="external-chart-textlink-wrap">
                    <a id="externalChartTextLink" class="external-chart-textlink" href="https://www.tradingview.com/symbols/BTCUSD/" target="_blank" rel="noopener noreferrer">Xem chi tiết biểu đồ trên TradingView</a>
                </div>
            </div>

            <div class="trading-form-floating" id="tradingFormFloating">
                <div class="trading-form">
                    <h3>Đặt lệnh</h3>
                    <div class="portfolio-box">
                        <h3>Tài sản của bạn</h3>
                        <p><strong>Số dư USD:</strong> <span id="usdBalance">--</span></p>
                        <h4>Các coin đang sở hữu:</h4>
                        <ul id="coinHoldings">
                            <li>Đang tải...</li>
                        </ul>
                    </div>

                    <div class="trading-form-group">
                        <label>Chọn coin</label>
                        <select id="tradingCoinSelect" class="trading-select" onchange="onCoinChange()">
                            <option value="BTC">Bitcoin (BTC)</option>
                            <option value="ETH">Ethereum (ETH)</option>
                            <option value="BNB">Binancecoin (BNB)</option>
                            <option value="SOL">Solana (SOL)</option>
                            <option value="XRP">Ripple (XRP)</option>
                        </select>
                    </div>

                    <div class="trading-form-group">
                        <label>Giá hiện tại (USD)</label>
                        <input type="number" id="tradingPrice" class="trading-input" value="0" step="0.01" oninput="calculateTradingTotal()">
                    </div>

                    <div class="trading-form-group">
                        <label>Số lượng</label>
                        <input type="number" id="tradingAmount" class="trading-input" placeholder="0.00" step="0.0001" oninput="calculateTradingTotal()">
                    </div>

                    <div class="trading-form-group">
                        <label>Tổng giá trị (USD)</label>
                        <input type="number" id="tradingTotal" class="trading-input" placeholder="0.00" step="0.01" readonly>
                    </div>

                    <div class="trading-actions">
                        <button class="trading-btn-buy" onclick="executeTradingAction('buy')">Mua</button>
                        <button class="trading-btn-sell" onclick="executeTradingAction('sell')">Bán</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{{#section "script"}}
    <script src="/js/trading.js"></script>
    <script src="/js/mainweb.js"></script>
{{/section}}
